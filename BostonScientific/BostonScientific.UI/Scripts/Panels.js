// EPIC Team - 2017
function operateFormatter(e, t, a) { return ['<div class="table-icons">', '<a rel="tooltip" title="Ver" class="btn btn-simple btn-info btn-icon table-action view" href="javascript:void(0)">', '<i class="fa fa-eye"></i>', "</a>", '<a rel="tooltip" title="Editar" class="btn btn-simple btn-warning btn-icon table-action edit" href="javascript:void(0)">', '<i class="fa fa-pencil"></i>', "</a>", '<a rel="tooltip" title="Eliminar" class="btn btn-simple btn-danger btn-icon table-action remove" href="javascript:void(0)">', '<i class="fa fa-close"></i>', "</a>", "</div>"].join("") } var $table = $("#bootstrap-table"); $().ready(function () {window.operateEvents = {"click .view": function (e, t, a, n) { info = JSON.stringify(a), $.ajax({ type: "POST", url: "Panels.aspx/PanelView", data: "{'IdPanel' : '" + a.IdPanel + "'}", contentType: "application/json; charset=utf-8", dataType: "json", success: function (e) { window.location = e.d } }) }, "click .edit": function (e, t, a, n) {info = JSON.stringify(a),$.ajax({ type: "POST", url: "Panels.aspx/GetPanelInfo", data: "{'IdPanel' : '" + a.IdPanel + "'}", contentType: "application/json; charset=utf-8", dataType: "json", success: function (e) { var t = e.d; document.getElementById("U_txtIdPanel").value = t[0].IdPanel, document.getElementById("U_txtModel").value = t[0].Model, document.getElementById("U_txtDescription").value = t[0].Description, document.getElementById("U_txtBus").value = t[0].Bus, document.getElementById("U_txtMain").value = t[0].Main, document.getElementById("U_txtArea").value = t[0].Area, document.getElementById("U_txtFrom").value = t[0].From, document.getElementById("U_txtVoltage").value = t[0].Voltage, document.getElementById("U_txtPhases").value = t[0].Phases, document.getElementById("U_txtThreads").value = t[0].Threads, document.getElementById("U_txtFrequency").value = t[0].Frequency, document.getElementById("U_txtComments").value = t[0].Comments, document.getElementById("U_value").innerHTML = t[0].SpacesAvailable + " / 42" } });$("#EditPanel").modal("show");}, "click .remove": function (e, t, a, n) { swal({ title: "¿Esta seguro?", text: "Toda la información correspondiente al panel " + a.IdPanel + " será eliminada junto con sus mediciones", type: "question", showCancelButton: !0, confirmButtonColor: "#01192e", cancelButtonColor: "#981613", confirmButtonText: "Eliminar panel", cancelButtonText: "Cancelar" }).then(function (e) { (e.value = !0) && swal({ title: 'Eliminando el panel...', text: 'Por favor, espere un momento.', allowOutsideClick: !1, allowEscapeKey: !1, allowEnterKey: !1, onOpen: () => { swal.showLoading(); $.ajax({ type: "POST", url: "Panels.aspx/DeletePanel", data: "{'IdPanel' : '" + a.IdPanel + "'}", contentType: "application/json; charset=utf-8", dataType: "json", success: function (e) { $table.bootstrapTable("remove", { field: "IdPanel", values: [a.IdPanel] }), swal({ position: "center", type: "success", title: "El panel " + a.IdPanel + " ha sido eliminado", showConfirmButton: !1, timer: 2e3, allowOutsideClick: !1, allowEscapeKey: !1, allowEnterKey: !1 }) } }); } }) }) }}, $table.bootstrapTable({ toolbar: ".toolbar", clickToSelect: !0, showRefresh: !1, search: !0, showToggle: !0, showColumns: !0, pagination: !0, searchAlign: "left", pageSize: 8, clickToSelect: !1, pageList: [8, 10, 25, 50, 100], formatShowingRows: function (e, t, a) { }, formatRecordsPerPage: function (e) { return e + " rows visible" }, icons: { refresh: "fa fa-refresh", toggle: "fa fa-th-list", columns: "fa fa-columns", detailOpen: "fa fa-plus-circle", detailClose: "ti-close" } }), $('[rel="tooltip"]').tooltip(), $(window).resize(function () { $table.bootstrapTable("resetView") })}); function CreatePanel() { var IdPanel = document.getElementById("C_txtIdPanel").value, Model = document.getElementById("C_txtModel").value, Description = document.getElementById("C_txtDescription").value, Bus = document.getElementById("C_txtBus").value, Main = document.getElementById("C_txtMain").value, Area = document.getElementById("C_txtArea").value, From = document.getElementById("C_txtFrom").value, Voltage = document.getElementById("C_txtVoltage").value, Phases = document.getElementById("C_txtPhases").value, Threads = document.getElementById("C_txtThreads").value, Frequency = document.getElementById("C_txtFrequency").value, Comments = document.getElementById("C_txtComments").value; swal({ title: 'Creando el panel...', text: 'Por favor, espere un momento.', allowOutsideClick: false, allowEscapeKey: false, allowEnterKey: false, onOpen: () => { swal.showLoading(); $.ajax({ type: "POST", url: "Panels.aspx/CreatePanel", data: "{'IdPanel' : '" + IdPanel + "','Model' : '" + Model + "','Description' : '" + Description + "','Bus' : '" + Bus + "','Main' : '" + Main + "','Area' : '" + Area + "','From' : '" + From + "','Voltage' : '" + Voltage + "','Phases' : '" + Phases + "','Threads' : '" + Threads + "','Frequency' : '" + Frequency + "','Comments' : '" + Comments + "'}", contentType: "application/json; charset=utf-8", dataType: "json", success: function (e) { 0 == e.d ? (swal({ position: "center", type: "success", title: "El panel " + IdPanel + " se ha creado correctamente!", showConfirmButton: !1, allowOutsideClick: !1, allowEscapeKey: !1, allowEnterKey: !1 }), setTimeout(function () { window.location.reload() }, 2e3)) : 1 == e.d && swal("Error", "El panel " + IdPanel + " ya se encuentra en el sistema!", "error") } }); } }) } function UpdatePanel() { var e = document.getElementById("U_txtIdPanel").value, t = document.getElementById("U_txtModel").value, n = document.getElementById("U_txtDescription").value, a = document.getElementById("U_txtBus").value + "A", l = document.getElementById("U_txtMain").value + "A", o = document.getElementById("U_txtArea").value, d = document.getElementById("U_txtFrom").value, u = document.getElementById("U_txtVoltage").value + "V", m = document.getElementById("U_txtPhases").value + "Ph", c = document.getElementById("U_txtThreads").value, s = document.getElementById("U_txtFrequency").value + "Hz", i = document.getElementById("U_txtComments").value; $.ajax({ type: "POST", url: "Panels.aspx/UpdatePanel", data: "{'IdPanel' : '" + e + "','Model' : '" + t + "','Description' : '" + n + "','Bus' : '" + a + "','Main' : '" + l + "','Area' : '" + o + "','From' : '" + d + "','Comments' : '" + i + "','Voltage' : '" + u + "','Phases' : '" + m + "','Threads' : '" + c + "','Frequency' : '" + s + "'}", contentType: "application/json; charset=utf-8", dataType: "json", success: function (t) { swal({ position: "center", type: "success", title: "La información del panel " + e + " se ha actualizado correctamente", showConfirmButton: !1, timer: 4e3, allowOutsideClick: !1, allowEscapeKey: !1, allowEnterKey: !1 }), setTimeout(function () { window.location.reload() }, 2e3) } }) }
